# Litestar Vite
> Seamless Litestar â†” Vite integration for SPA, Template, and Inertia.js apps with type-safe routing and Vite dev tooling.

Current Version: **v0.15.0-alpha.5**
Documentation: [litestar-org.github.io/litestar-vite/latest/](https://litestar-org.github.io/litestar-vite/latest/)

## Quick Start

### Installation
```bash
# 1. Install Python package
pip install litestar-vite
# Optional extras: [jinja], [http2], [nodeenv]

# 2. Install frontend dependencies (using configured executor)
litestar assets install
```

### Basic Usage (SPA)
```python
from litestar import Litestar
from litestar_vite import VitePlugin, ViteConfig

# Auto-detects index.html -> SPA mode
app = Litestar(plugins=[VitePlugin(config=ViteConfig(dev_mode=True))])
```

### Run Development
```bash
# Starts Litestar + proxies Vite dev server (single port)
litestar run
```

## Core Features

- **Modes**: `spa` (default), `template` (Jinja/HTMX), `hybrid` (Inertia SPA), `ssr` (Astro/Nuxt), `external` (Angular CLI).
- **Proxy**:
  - `vite` (default): Tunnels Vite traffic through Litestar (single port).
  - `direct`: Exposes Vite on its own port.
  - `proxy`: Proxies external dev servers (Next.js, Angular).
- **Inertia.js**: Full integration with `InertiaPlugin`, including protocol v2, SSR, and Flash messages.
- **Type Safety**: Generates TypeScript types for routes and OpenAPI schemas via `litestar assets generate-types`.

## Configuration (ViteConfig)

### Key Options
- `mode`: Serving mode (auto-detected if None).
- `dev_mode`: Enable HMR and dev server (env: `VITE_DEV_MODE`).
- `runtime`: Execution settings (`host`, `port`, `executor`).
- `paths`: File system paths (`root`, `bundle_dir`, `resource_dir`).
- `types`: Type generation settings (`TypeGenConfig`).
- `inertia`: Inertia settings (`InertiaConfig`).
- `spa`: SPA transformation settings (`SPAConfig`).

### Environment Variables
- `VITE_DEV_MODE`: `True` / `False`
- `VITE_PROXY_MODE`: `vite`, `direct`, `proxy`
- `VITE_HOST`, `VITE_PORT`: Dev server connection
- `ASSET_URL`: Base URL for static assets

## CLI Commands
*Use `litestar assets` instead of direct npm/node commands.*

- `litestar assets install`: Install frontend deps.
- `litestar assets serve`: Run dev server (or watch mode).
- `litestar assets build`: Build for production.
- `litestar assets init`: Scaffold new frontend.
- `litestar assets doctor`: Diagnose configuration.
- `litestar assets generate-types`: Generate TS types.

## Frontend Integration (TypeScript)

**vite.config.ts**:
```typescript
import litestar from "litestar-vite-plugin";

export default {
  plugins: [
    litestar({
      input: ["src/main.ts"],
      assetUrl: "/static/",
      types: { enabled: true }
    })
  ]
};
```

**Framework Helpers**:
- `litestar-vite-plugin/inertia-helpers`: `resolvePageComponent`, `unwrapPageProps`.
- `litestar-vite-plugin/helpers`: `route()`, `csrfFetch()`.
- Integrations: `/astro`, `/sveltekit`, `/nuxt`.
