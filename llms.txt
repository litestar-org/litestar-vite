# Litestar Vite

> Seamless Litestar â†” Vite integration for SPA, Template, and Inertia.js apps with type-safe routing and Vite dev tooling.

Litestar-Vite pairs the Litestar Python framework with a Vite (Node) toolchain. It supports single-port proxy dev, asset manifest loading in production, optional type generation, and dual Python/TypeScript plugins. Current version: v0.15.0-alpha.3.

## Quick Start
- [Install](#install): `pip install litestar-vite` (Python) + `litestar assets install` (frontend deps via configured executor).
- [SPA setup](#python-api): `VitePlugin(config=ViteConfig(dev_mode=True))` registers proxy, static assets, and HMR.
- [Template/HTMX](#python-api): `ViteConfig(mode="template", dev_mode=True)` keeps Jinja templates and Vite assets in sync.
- [Run dev](#install): `litestar run` starts Litestar; Vite dev traffic is proxied by default.

## Modes & Proxy
- [Proxy Modes](#modes--proxy): `proxy_mode` controls proxy handling:
  - `vite_proxy` (default): Tunnels Vite HTTP+WS through Litestar (single-port HMR)
  - `vite_direct`: Exposes Vite on its own port (multi-port)
  - `external_proxy`: Proxy to external dev servers (Angular CLI, Next.js, etc.) via `ExternalDevServer`
- [Hotfile](#modes--proxy): TS plugin writes `public/hot` with the dev URL; proxy & HMR read it dynamically.
- [Env vars](#modes--proxy): `VITE_HOST`, `VITE_PORT`, `VITE_PROTOCOL`, `VITE_PROXY_MODE`, `VITE_DEV_MODE`.

## Python API
- [ViteConfig](#viteconfig): modes `spa|template|htmx` (auto-detects index.html or Jinja). Paths: `bundle_dir=public`, `resource_dir=src`, `public_dir=public`, `manifest_name=manifest.json`, `hot_file=hot`, `asset_url=/static/`, optional `ssr_output_dir`. Runtime: `dev_mode`, `proxy_mode=vite_proxy`, `external_dev_server`, `host`, `port=5173`, `protocol=http`, `executor=node|bun|deno|yarn|pnpm`, `spa_handler`, `http2`, `start_dev_server`. Types: `TypeGenConfig(enabled, output, openapi_path, routes_path, generate_zod, generate_sdk)`. SPA config: `inject_routes`, `inject_csrf=True`, `routes_var_name`, `csrf_var_name`, `app_selector="#app"`, `cache_transformed_html`. Inertia config: `enabled`, `root_template=index.html`, include routes/flash/errors. Deploy config optional via `deploy=True`.
- [VitePlugin](#viteplugin): wires static file serving, Jinja template callables (`vite`, `vite_static`, `vite_partial`, `vite_hmr`), dev proxy middleware + HMR WebSocket, SPA catch-all handler via `ViteSPAHandler`, type export & route injection.
- [InertiaPlugin](#inertiaplugin): requires session middleware; sets `InertiaRequest`/`InertiaResponse`, registers middleware and exception handler, generates JS routes, supports SPA mode via `HtmlTransformer`. Route component via `@get("/", component="Home")` or `@get("/", page="Home")` (both work).
- [CLI](#cli): `litestar assets doctor|init|install|build|serve|deploy|export-routes|generate-types|status`.

## TypeScript API
- [litestar(config)](#typescript-plugin): Vite plugin factory (ESM). Returns `[LitestarPlugin, ...]` with optional full-reload and type-gen plugins.
- [PluginConfig](#typescript-plugin): `input` (string|string[]), `assetUrl` `/static/`, `bundleDirectory` `public/dist`, `resourceDirectory` `resources`, `hotFile` `${bundleDirectory}/hot`, `ssr`, `ssrOutputDirectory`, `refresh`, `detectTls`, `autoDetectIndex` true, `transformOnServe` hook, `types` boolean|TypesConfig.
- [TypesConfig](#typescript-plugin): `enabled`, `output=src/types/api`, `openapiPath`, `routesPath`, `generateZod`, `generateSdk`, `debounce=300ms`. When enabled, plugin watches OpenAPI/routes files, runs `@hey-api/openapi-ts`, emits HMR.
- [Helpers](#typescript-plugin): `litestar-vite-plugin/helpers` exports `route()`, `getCsrfToken()`, `csrfHeaders()`, `csrfFetch()`, `getRoutes()`, `toRoute()`, `currentRoute()`, `isRoute()`, `isCurrentRoute()`.
- [Inertia Helpers](#typescript-plugin): `litestar-vite-plugin/inertia-helpers` exports `resolvePageComponent()` plus all route/CSRF helpers.
- [Framework Integrations](#typescript-plugin): `/astro`, `/sveltekit`, `/nuxt` sub-exports for SSR framework integration.

## Examples
- [SPA](examples/react): React single-page setup with proxy HMR. Also: vue, svelte.
- [Template](examples/basic): Jinja/HTMX template mode with Vite asset tags. Also: jinja, template-htmx.
- [Inertia](examples/vue-inertia): Full-stack Inertia.js using `InertiaPlugin`. Also: react-inertia, vue-inertia-jinja, react-inertia-jinja.
- [Typed](examples/fullstack-typed): Full-stack typed routes and API generation.
- [External Dev Server](examples/angular-cli): Angular CLI proxied through Litestar.
- [SSR Frameworks](examples/nuxt): Nuxt/Astro/SvelteKit with Litestar API backend.

## Optional
- [Deploy](#cli): `litestar assets deploy` syncs manifest/assets via fsspec (gcs://, s3://, etc.).
- [Type generation](#typescript-plugin): set `types=True` in ViteConfig and TS plugin; run `generate-types` CLI.
- [Docs](https://litestar-org.github.io/litestar-vite/): Full documentation site.

- Prefer `litestar assets install` to install frontend deps with your configured executor.
